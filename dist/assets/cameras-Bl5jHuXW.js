import{_ as z,v as S,o as $,c as j,w as r,Q as M,r as u,u as N,z as F,d as v,e as s,f as n,V as d,m as R,h as f,t as _,j as y,R as T,S as A,B as E,q as p}from"./index-DVKfSaEg.js";import{b as O,_ as W,V as Z}from"./VContainer-B2Q5malN.js";import{b as q}from"./VSelect-HBCsh-ia.js";import"./VInput-i80qwuyr.js";import"./VDivider-DYVzIxcA.js";import"./VChip-_0uLb9DI.js";const D={class:"d-flex justify-space-between align-start flex-wrap gap-3 mb-6"},Q={class:"d-flex justify-space-between align-center flex-wrap ga-3 mb-3"},U={class:"text-body-1 text-primary-high"},Y={class:"d-flex ga-2"},G={key:0,class:"camera-stage"},H={class:"camera-stage-toolbar"},J={class:"text-caption text-secondary"},K=["alt","src"],L={key:1,class:"text-center py-10"},P={__name:"cameras",setup(X){const b=F(),{error:C}=N(),c=u(!1),a=u([]),l=u(null),o=u(1),w=p(()=>a.value.map(t=>({title:`${t.name}${t.active?" · live":" · idle"}`,value:t.id}))),m=p(()=>a.value.find(t=>t.id===l.value)),V=p(()=>({transform:`scale(${o.value})`}));async function x(){try{c.value=!0;const t=await M();a.value=t.data?.cameras||[],!l.value&&a.value.length>0&&(l.value=a.value[0].id),l.value&&!a.value.some(e=>e.id===l.value)&&(l.value=a.value[0]?.id||null)}catch(t){C("Failed to load camera feeds: "+t.message),a.value=[],l.value=null}finally{c.value=!1}}function k(){if(a.value.length===0)return;const e=(a.value.findIndex(i=>i.id===l.value)+1)%a.value.length;l.value=a.value[e].id}function I(){if(a.value.length===0)return;const t=a.value.findIndex(i=>i.id===l.value),e=t<=0?a.value.length-1:t-1;l.value=a.value[e].id}function g(){o.value=Math.min(o.value+.2,3)}function h(){o.value=Math.max(o.value-.2,1)}function B(t){t.deltaY<0?g():h()}return S(l,()=>{o.value=1}),$(x),(t,e)=>(v(),j(O,{class:"pa-4 pa-md-6",fluid:""},{default:r(()=>[s("div",D,[e[3]||(e[3]=s("div",null,[s("h1",{class:"text-h4 text-md-h3 text-primary-high font-weight-bold mb-1"},"Camera Focus View"),s("p",{class:"text-body-2 text-secondary"},"Inspect each camera feed in detail for alignment and focus adjustments")],-1)),n(d,{"prepend-icon":"mdi-arrow-left",variant:"text",onClick:e[0]||(e[0]=i=>R(b).push("/apps/autodarts"))},{default:r(()=>[...e[2]||(e[2]=[f("Back to Autodarts",-1)])]),_:1})]),n(W,{class:"mb-4"},{default:r(()=>[n(Z,null,{default:r(()=>[s("div",Q,[s("div",U,[e[4]||(e[4]=f(" Cameras detected: ",-1)),s("strong",null,_(a.value.length),1)]),s("div",Y,[n(d,{disabled:a.value.length===0,icon:"mdi-chevron-left",variant:"outlined",onClick:I},null,8,["disabled"]),n(d,{disabled:a.value.length===0,icon:"mdi-chevron-right",variant:"outlined",onClick:k},null,8,["disabled"]),n(d,{loading:c.value,"prepend-icon":"mdi-refresh",variant:"outlined",onClick:x},{default:r(()=>[...e[5]||(e[5]=[f("Refresh",-1)])]),_:1},8,["loading"])])]),n(q,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=i=>l.value=i),class:"mb-4",density:"comfortable","hide-details":"",items:w.value,label:"Active camera",variant:"outlined"},null,8,["modelValue","items"]),m.value?(v(),y("div",G,[s("div",H,[n(d,{icon:"mdi-magnify-minus-outline",variant:"text",onClick:h}),s("span",J,"Zoom "+_(o.value.toFixed(1))+"x",1),n(d,{icon:"mdi-magnify-plus-outline",variant:"text",onClick:g})]),s("div",{class:"camera-image-wrapper",onWheel:T(B,["prevent"])},[s("img",{alt:m.value.name,class:"camera-image",src:m.value.feed_url,style:A(V.value)},null,12,K)],32)])):(v(),y("div",L,[n(E,{color:"secondary",icon:"mdi-camera-off",size:"56"}),e[6]||(e[6]=s("div",{class:"text-body-2 text-secondary mt-2"},"No camera feed available",-1))]))]),_:1})]),_:1})]),_:1}))}},oe=z(P,[["__scopeId","data-v-ddbaf9d2"]]);export{oe as default};
