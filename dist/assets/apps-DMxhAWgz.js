import{_ as N,q as j,o as E,a as q,c as p,w as e,p as f,s as F,r as I,u as L,v as U,x as D,y as O,d,h as W,e as o,j as G,f as s,z as H,A as C,l as v,t as B}from"./index-CUlQIrP-.js";import{b as J,_ as A,V as k,c as K}from"./VContainer-BWr7X9vz.js";import{_ as Q}from"./StatusBadge-8zFFxfMT.js";import{V as X,a as M}from"./VRow-CCF6pCQE.js";import{V as $}from"./VChip-BG6Su_jz.js";const Y={key:0,class:"mb-6"},Z={class:"d-flex justify-space-between align-start mb-4"},tt={class:"text-body-2 text-secondary mt-1"},at={class:"d-flex align-center justify-space-between mb-3"},et={__name:"apps",setup(st){const m=U(),R=D(),{error:z}=L(),r=I(null),l=I(null);let i=null,u=null;const c=f(()=>m.path==="/apps"),g=f(()=>{if(!r.value?.installed)return"Not Installed";const a=h(l.value?.status||l.value?.event);if(a)return a;if(l.value?.connected)return l.value?.running?"Running":"Stopped";const t=String(r.value?.status||""),n=h(t);return n||(r.value?.active?"Running":"Stopped")}),P=f(()=>{const a=g.value.toLowerCase();return a==="running"?"success":a==="starting"?"info":a==="calibrating"?"warning":"neutral"});function h(a){const t=String(a||"").toLowerCase();return t?t.includes("start")?"Starting":t.includes("calibrat")?"Calibrating":t.includes("run")?"Running":t.includes("stop")?"Stopped":"":""}function T(a){const t=window.location.protocol==="https:"?"https":"http",n="/api/state",V=n.startsWith("/")?n:`/${n}`;return`${t}://${a}:3180${V}`}async function b(){const t=T("cdo-vertex.local");try{const n=await fetch(t,{cache:"no-store"});if(!n.ok)throw new Error("Board Manager request failed");l.value=await n.json()}catch{l.value=null}}function _(){i||(b(),i=setInterval(b,1e3))}function w(){i&&(clearInterval(i),i=null)}async function y(){try{const a=await F();r.value=a.data}catch(a){z("Failed to load app status: "+a.message)}}function x(){u||(y(),u=setInterval(y,1e3))}function S(){u&&(clearInterval(u),u=null)}return j(()=>m.path,async a=>{a==="/apps"?(x(),_()):(S(),w())}),E(async()=>{c.value&&(x(),_())}),q(()=>{S(),w()}),(a,t)=>{const n=O("router-view");return d(),p(J,{class:"pa-4 pa-md-6",fluid:""},{default:e(()=>[c.value?(d(),W("div",Y,[...t[1]||(t[1]=[o("h1",{class:"text-h4 text-md-h3 text-primary-high font-weight-bold mb-1"},"Apps",-1),o("p",{class:"text-body-2 text-secondary"},"Installed applications and runtime status",-1)])])):G("",!0),c.value?(d(),p(X,{key:2},{default:e(()=>[s(M,{cols:"12",lg:"4",md:"6"},{default:e(()=>[s(A,{class:"h-100 hoverable-card app-card",onClick:t[0]||(t[0]=V=>H(R).push("/apps/autodarts"))},{default:e(()=>[s(k,null,{default:e(()=>[o("div",Z,[s(K,{color:"primary",size:"48",variant:"tonal"},{default:e(()=>[s(C,{icon:"mdi-bullseye-arrow"})]),_:1}),s(Q,{variant:P.value},{default:e(()=>[v(B(g.value),1)]),_:1},8,["variant"])]),t[3]||(t[3]=o("div",{class:"text-h6 text-primary-high font-weight-bold"},"Autodarts",-1)),o("div",tt,B(r.value?.installed?`Version ${r.value?.version||"n/a"}`:"Install to enable smart dartboard scoring."),1),s($,{class:"mt-4",color:"info","prepend-icon":"mdi-cog",size:"small",variant:"tonal"},{default:e(()=>[...t[2]||(t[2]=[v(" Tap for controls ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),s(M,{cols:"12",lg:"4",md:"6"},{default:e(()=>[s(A,{class:"h-100"},{default:e(()=>[s(k,null,{default:e(()=>[o("div",at,[t[4]||(t[4]=o("div",{class:"text-h6 text-primary-high"},"Future App Slots",-1)),s(C,{color:"secondary",icon:"mdi-download-circle-outline"})]),t[6]||(t[6]=o("div",{class:"text-body-2 text-secondary mb-3"}," This area is ready for downloadable apps in upcoming releases. ",-1)),s($,{color:"secondary",size:"small",variant:"outlined"},{default:e(()=>[...t[5]||(t[5]=[v("Coming Soon",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(d(),p(n,{key:1}))]),_:1})}}},ut=N(et,[["__scopeId","data-v-2b11dbb8"]]);export{ut as default};
